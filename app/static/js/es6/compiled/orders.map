{"version":3,"file":"orders.js","sources":["/Users/slyeargin/Documents/Code/super-takeout/app/static/js/es6/orders.es6.js"],"names":[],"mappings":"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","sourcesContent":["/* global ajax */\n/* jshint unused:false */\n\n(function(){\n  'use strict';\n\n  $(document).ready(init);\n\n  function init(){\n    $('#order').on('change', '.menu', getMenu);\n    $('#order').on('change', '.items', formChanged);\n    $('#order').on('click', '.nuke', delMenu);\n    $('#order').on('change', 'input', formChanged);\n    $('#order').on('blur', 'input', formChanged);\n    $('#add').click(addItem);\n  }\n\n  function formChanged(){\n    var item = $(this).parent();\n    updateCost(item);\n  }\n\n  function updateCost(item){\n    updateSubTotal(item);\n    updateTotal();\n  }\n\n  function updateSubTotal(item){\n    var subtotalCost = 0;\n    var subtotalCalories = 0;\n    var qty = item.find('input').val() * 1;\n    var cost = item.find('.items option:selected').attr('data-cost') * 1;\n    var calories = item.find('.items option:selected').attr('data-calories') * 1;\n    if(qty > 0 && !isNaN(cost)){\n      subtotalCost = (qty * cost);\n      subtotalCalories = (qty * calories);\n    }\n\n    item.data('subtotalCost', subtotalCost);\n    item.data('subtotalCalories', subtotalCalories);\n  }\n\n  function updateTotal(){\n    var subtotalCosts = $('.menu-item').map((i,d)=>$(d).data('subtotalCost')).toArray();\n    var subtotalCals = $('.menu-item').map((i,d)=>$(d).data('subtotalCalories')).toArray();\n    var totalCost = 0;\n    var totalCalories = 0;\n\n    if(subtotalCosts.length){\n      totalCost = subtotalCosts.reduce((p,c)=>p+c);\n    }\n    if(subtotalCals.length){\n      totalCalories = subtotalCals.reduce((p,c)=>p+c);\n    }\n\n    $('#total').text(totalCost.toFixed(2));\n    $('#calories').text(totalCalories.toFixed(0));\n    $('.totalcost').val(totalCost);\n    $('.totalcalories').val(totalCalories);\n  }\n\n  function getMenu(){\n    var menu = $(this).val();\n    var next = $(this).next();\n    ajax(`/dishes/${menu}`, 'get', null, h=>{\n      next.empty().append(h);\n      updateCost(next.parent());\n    });\n  }\n\n  function addItem(){\n    var item = $('#order').children(':last').clone();\n    $('#order').append(item);\n    $('.qty').last().val('');\n    $('.items').last().empty().append(`<option>Select a Dish</option>`);\n  }\n\n  function delMenu(e){\n    if ($('.menu-item').length > 1){\n      $(this).parent().remove();\n      updateTotal();\n    }\n    e.preventDefault();\n  }\n})();\n"]}